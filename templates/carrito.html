{% extends "base.html" %}
{% block title %}Carrito{% endblock %}

{% block content %}
<h2>Carrito de compras</h2>

{% if carrito %}
<table class="table">
  <thead>
    <tr>
      <th>Producto</th>
      <th>Precio</th>
      <th>Cantidad</th>
      <th>Subtotal</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for item in carrito.values() %}
    <tr>
      <td>{{ item.nombre }}</td>
      <td>${{ '%.2f'|format(item.precio) }}</td>
      <td>{{ item.cantidad }}</td>
      <td>${{ '%.2f'|format(item.precio * item.cantidad) }}</td>
      <td>
        <a href="{{ url_for('eliminar', producto_id=item.id) }}" class="btn btn-danger btn-sm">Eliminar</a>
        <!-- Botón de compra individual eliminado -->
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<p><strong>Total:</strong> ${{ '%.2f'|format(total) }}</p>

<!-- Botón para comprar todo el carrito -->
<form method="post" action="{{ url_for('comprar_carrito') }}">
  <button type="submit" class="btn btn-success">Comprar todo el carrito</button>
</form>

<a href="{{ url_for('vaciar') }}" class="btn btn-secondary mt-2">Vaciar carrito</a>
{% else %}
<p>Tu carrito está vacío.</p>
{% endif %}
{% endblock %}
